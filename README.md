# CCP MOVII SERVICES

Service to __SERVICE_SUMMARY__.

## SETUP

traefik/
â””â”€â”€ dist/
    â””â”€â”€ app-angular
â””â”€â”€ docker-compose.yml
â””â”€â”€ letsencrypt/
    â””â”€â”€ acme.json  # chmod 600 acme.json
â””â”€â”€ nginx/
    â””â”€â”€ nginx.conf
â””â”€â”€ static-files/
    â””â”€â”€ .well-known

### SETUP YOUR VENV

```bash
# linux
python -m venv venv
source venv/bin/activate
```

### INSTALL REQUIREMENTS ON YOUR VENV

```bash
pip install --ignore-installed --no-cache-dir -r requirements.txt
```

## RESOURCES

ENDPOINT | METH
--|--
`/v1/services_credit/get-token/` | `POST`
`/v1/services_credit/sale-transaction/` | `POST`


### DOCKERFILE
There are two dockerfiles.
Dockerfile.dev is used by docker-compose.yml and is used to develop because it allows hot reload
Dockerfile will be used in dev, stage and prod environments

### RUN MICROSERVICE WITH DOCKER COMPOSE
```bash
#We first create the network. It will allow to communicate our microservices running from different docker-compose files
docker network create ccp
# to build
docker-compose up --build
# To run in detached mode
docker-compose up -d
# To view logs
docker compose logs -f
#To view running containers
docker ps
#To enter into a specific running container
docker exec -it {containerId} bash
#To destroy created docker components
docker compose down 
```

### GENERATE PROTOBUFS
```bash
python -m grpc_tools.protoc -I src/recommendations/protobufs/ --python_out=src/recommendations/ --grpc_python_out=src/recommendations/ src/recommendations/protobufs/recommendations.proto

#Fix to convert the absolute imports generated by protoc to relative imports
#We use the library: https://pypi.org/project/protoletariat/
protol   --create-package   --in-place   --python-out src/recommendations/ protoc --proto-path=src/recommendations/protobufs/ src/recommendations/protobufs/*.proto

#We run both commands using the Makefile command:
make proto-recommendations
```

# ACKNOWLEDGMENTS

Thanks to all Dyner24 team.

---

* Powered by [Carlos Arriero](mailto:desarrollo@dyner24.com) ðŸ˜Ž
